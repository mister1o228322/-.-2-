# Задание 1

1. Активный master-сервер и пассивный репликационный slave-сервер (Master-Slave с одним слейвом)
Это классическая схема «горячего резерва».

Отказоустойчивость (Failover): Главное преимущество. Если Master выходит из строя, можно вручную или автоматически переключить нагрузку на Slave, который будет временно исполнять роль главного. Это минимизирует время простоя системы.

Резервное копирование без остановки работы: Тяжелые операции резервного копирования (backup) можно выполнять на Slave-сервере. Это не создает нагрузки на Master и не блокирует таблицы в «боевой» базе.

Разделение нагрузки по чтению (Read Scaling): Можно разгрузить Master, отправив часть тяжелых запросов на чтение (например, формирование отчетов или аналитику) на Slave-сервер. Master занимается только транзакциями (вставкой, обновлением, удалением).

2. Master-сервер и несколько slave-серверов (Master — Multiple Slaves)
Это развитие первой модели для больших проектов.

Высокая производительность чтения: Позволяет горизонтально масштабировать операцию чтения данных. Если у вас сайт, где 90% операций — это чтение (например, просмотр карточек товаров), вы можете повесить несколько слейвов за балансировщиком нагрузки. Каждый слейв будет обрабатывать свою долю запросов.

Геораспределение: Slave-сервера можно разместить в разных дата-центрах или регионах, приблизив данные к пользователям и снизив задержки (latency).

Специализация серверов: Разным слейвам можно назначать разные задачи. Один слейв использовать для аналитики и тяжелых SELECT запросов, второй — для резервного копирования, третий — как горячую замену Master'у. Это предотвращает ситуацию, когда «тяжелый» отчет пользователя тормозит работу всей системы.

# Задание 2

У нас есть три таблицы: Пользователи, Книги, Магазины.

Для создания масштабируемой системы мы применим комбинацию двух подходов: Вертикальное разделение (Vertical Sharding) и Горизонтальное разделение (Horizontal Sharding).

1. Принципы построения системы
Шаг 1: Вертикальный шардинг (Разделение по смыслу)
Так как таблицы принадлежат разным бизнес-юнитам (люди, товар, точки продаж), их стоит сразу разнести на разные физические серверы (или кластеры). Это позволит масштабировать их независимо.

DB_USERS — кластер для данных пользователей.

DB_BOOKS — кластер для каталога книг.

DB_STORES — кластер для данных магазинов.

Шаг 2: Горизонтальный шардинг (Разделение внутри таблицы)
Каждая из этих таблиц, скорее всего, слишком велика, чтобы храниться на одном сервере, поэтому внутри каждого кластера мы применим шардинг.

Пользователи: Шардинг по user_id (или географии).

Книги: Шардинг по ISBN или category_id.

Магазины: Шардинг по региону/городу (так как магазины редко бывают глобальными).

2. Блок-схема архитектуры
представляю логическую схему расположения:

<img width="691" height="439" alt="image" src="https://github.com/user-attachments/assets/512fa004-2ad9-4842-ad40-16d5b1ab7f87" />



3. Описание схемы размещения
А. Кластер «Пользователи» (Сервера 1, 2, 3)

Режим работы: Master-Slave внутри шарда.

Шардирование: Горизонтальное (по диапазону ID или хэшу).

Сервер 1 (Шард 1): Пользователи с ID 1–1 000 000 (Master) + его реплики.

Сервер 2 (Шард 2): Пользователи с ID 1 000 001–2 000 000 (Master) + его реплики.

Сервер 3: Резервный / Для поиска (может содержать реплики с разных шардов для сложных запросов).

Б. Кластер «Книги» (Сервера 4, 5, 6)

Режим работы: Master-Slave.

Шардирование: Функциональное (по жанрам или алфавиту) + Репликация.

Сервер 4: Книги жанра "Художественная литература" (Master). Здесь же находится Slave для жанра "Наука".

Сервер 5: Книги жанра "Наука" (Master). Здесь же находится Slave для жанра "Художественная литература".

Сервер 6: Поисковый индекс. Сюда стекаются данные со всех шардов для быстрого полнотекстового поиска (или используется отдельная поисковая система типа Elasticsearch).

В. Кластер «Магазины» (Сервер 7)

Режим работы: Master-Slave (классическая репликация).

Шардирование: Вертикальное (выделено в отдельный кластер) + репликация для отказоустойчивости.

Master 7: Содержит все данные о магазинах (адреса, контакты, координаты). Так как магазинов обычно не миллионы, шардинг по горизонтали может не потребоваться.

Slave 7: Реплика Master'а. Используется для гео-поиска (карты) и формирования отчетов, чтобы не нагружать основной сервер.

4. Режимы работы серверов
Master (Чтение/Запись):

Принимает все операции вставки (INSERT), обновления (UPDATE), удаления (DELETE).

Это единственный источник правды для своего сегмента данных.

На схеме: Сервер 1 (Шард A), Сервер 4 (Жанр А), Master 7.

Slave (Только чтение):

Постоянно синхронизируется с Master'ом (асинхронно или синхронно).

Обрабатывает тяжелые запросы на чтение (SELECT), разгружая Master.

Используется для резервного копирования.

На схеме: Все остальные сервера (Сервер 3, Сервер 6, Slave 7 и реплики на Серверах 2 и 5).

Сервер поиска/аналитики (гибридный):

Может получать данные из разных шардов (например, через ETL процессы) и собирать их в одном месте для кросс-табличных запросов, которые невозможно выполнить напрямую из-за шардинга.
